---
name: frontend-translations
description: Frontend translations with @aexol/dynamite - useDynamite hook, t() function, factory patterns for data/schemas, cookie-based locale
---

## Usage

```typescript
import { useDynamite } from '@aexol/dynamite';

const { t, locale } = useDynamite();
t('Hello World'); // key = English text
t('Welcome, {{name}}', { name: 'John' }); // interpolation
```

## Factory Pattern (data files & Zod schemas)

Files outside React tree can't call hooks — accept `t` as a parameter:

```typescript
export const getFeatures = (t: (key: string) => string) => [{ title: t('Feature One') }];

export const createSchema = (t: (key: string) => string) =>
  z.object({ name: z.string().min(2, t('Name must be at least 2 characters')) });

export type SchemaValues = z.infer<ReturnType<typeof createSchema>>;

// Inside component:
const schema = createSchema(t);
const form = useForm({ resolver: zodResolver(schema) });
```

## Locale (Cookie-Based)

- Locale stored in a `locale` **cookie** — NOT localStorage, NOT Zustand
- `LanguageSwitcher` sets cookie + `window.location.reload()`
- Server reads cookie → SSR renders correct language
- Add new locale: add code to `SUPPORTED_LOCALES` in `backend/src/lib/cookies.ts`, create `frontend/public/locales/{code}/common.json`, restart dev server

## Rules

1. Key = English text — flat, no nesting
2. Factory pattern for all data files and Zod schemas
3. Locale via cookie only
4. **NEVER manually edit non-English locale files** (e.g., `pl/common.json`) — auto-generated by `@aexol/vite-plugin-dev-translate`
5. Commit generated translation files to git
6. Don't translate: brand names (Axolotl, GraphQL, React…), code snippets, URLs
7. Files outside React tree (`api/errors.ts`, `lib/queryClient.ts`) can't call `useDynamite()` — leave strings in English
8. Use `locale` from `useDynamite()` for date formatting — map to BCP 47 tags: `const LOCALE_MAP: Record<string, string> = { en: 'en-US', pl: 'pl-PL' }`
