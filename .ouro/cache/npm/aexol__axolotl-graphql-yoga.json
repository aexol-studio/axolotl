{"pkg":"@aexol/axolotl-graphql-yoga","readme":"# @aexol/axolotl-graphql-yoga\n\nGraphQL Yoga adapter for Axolotl. It wires Axolotl resolvers, scalars and directives into a Yoga server.\n\n## What It Does\n\n- Translates Axolotl resolver signatures to Yoga handlers\n- Loads schema from file/content and builds an executable schema\n- Applies GraphQL directives via `@graphql-tools/utils` mapping\n- Creates a Node HTTP server from Yoga with optional per-request context\n\n## Types Provided\n\n- Resolver input tuple: `[Source, Args, Context]`\n- Context type: `Context = YogaInitialContext & Omit<Ctx, keyof YogaInitialContext>`\n  - `Ctx` is the generic you pass to `graphqlYogaWithContextAdapter<Ctx>()` to statically augment context\n  - You can also provide `options.context(initial: YogaInitialContext)` to build per-request context at runtime\n- Directive mapper: `SchemaMapper = (schema: GraphQLSchemaWithContext<YogaInitialContext>, getDirective: typeof getDirectiveFn) => SchemaMapperInitial`\n- Adapter factory type: `graphqlYogaWithContextAdapter<Ctx, Context>(customContext?: Ctx)` returns `AxolotlAdapter<[any, any, Context], SchemaMapper>`\n- Return value: `{ server: import('http').Server, yoga: ReturnType<typeof createYoga> }`\n\n## Scalars\n\n- Define scalars with `createScalars` from axolotl-core and pass them to the adapter: `graphqlYogaAdapter({ resolvers, scalars })`.\n- Scalars are merged into the executable schema alongside resolvers.\n- Full guide: `packages/core/README.md:1` (Scalars section).\n\n## Directives\n\n- Define directive mappers with `createDirectives` from axolotl-core.\n- Each directive is a function `(schema, getDirective) => SchemaMapperInitial` used with `@graphql-tools/utils.mapSchema`.\n- Pass them to the adapter as `{ directives }`.\n\nExample `@auth` directive (blocks access without header):\n\n```ts\nimport { createDirectives } from '@aexol/axolotl-core';\nimport { defaultFieldResolver } from 'graphql';\nimport { MapperKind } from '@graphql-tools/utils';\nimport type { YogaInitialContext } from 'graphql-yoga';\n\nconst directives = createDirectives({\n  auth: (schema, getDirective) => ({\n    [MapperKind.OBJECT_FIELD]: (fieldConfig) => {\n      const has = getDirective(schema, fieldConfig, 'auth');\n      if (!has) return fieldConfig;\n      const { resolve = defaultFieldResolver } = fieldConfig as any;\n      return {\n        ...fieldConfig,\n        resolve: async (src: any, args: any, ctx: YogaInitialContext, info: any) => {\n          if (ctx.request.headers.get('auth') !== 'password') throw new Error('Unauthorized');\n          return resolve(src, args, ctx, info);\n        },\n      } as any;\n    },\n  }),\n});\n\n// Include in adapter\ngraphqlYogaAdapter({ resolvers, directives });\n```\n\nSee core README for a deeper explanation and additional notes.\n\n## Quick Start\n\n```ts\nimport { Axolotl } from '@aexol/axolotl-core';\nimport { graphqlYogaAdapter } from '@aexol/axolotl-graphql-yoga';\n\nconst { createResolvers } = Axolotl(graphqlYogaAdapter)<{\n  Query: { hello: string };\n}>();\n\nconst resolvers = createResolvers({\n  Query: { hello: () => 'world' },\n});\n\nconst { server } = graphqlYogaAdapter({ resolvers }).adapter({ resolvers });\nserver.listen(4000);\n```\n\n### Quick Start With Scalars\n\n```ts\nimport { Axolotl } from '@aexol/axolotl-core';\nimport { graphqlYogaAdapter } from '@aexol/axolotl-graphql-yoga';\nimport { GraphQLScalarType } from 'graphql';\n\ntype ScalarModels = { URL: unknown };\n\nconst { createResolvers, createScalars } = Axolotl(graphqlYogaAdapter)<\n  { Query: { hello: string } },\n  ScalarModels\n>();\n\nconst scalars = createScalars({\n  URL: new GraphQLScalarType({\n    name: 'URL',\n    serialize: (v) => new URL(String(v)).toString(),\n    parseValue: (v) => (v == null ? v : new URL(String(v))),\n  }),\n});\n\nconst resolvers = createResolvers({\n  Query: { hello: () => 'world' },\n});\n\ngraphqlYogaAdapter({ resolvers, scalars }).server.listen(4000);\n```\n\nSee `adapters/graphql-yoga/index.ts:1` for the adapter implementation.\n","homepage":null,"repository":null}